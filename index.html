<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>P≈ôidat produkt</title>
  
  <!-- Bootstrap 5 CSS -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />

  <!-- Ikona nebo libovoln√Ω font (voliteln√©) -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
  />

  <!-- Vlastn√≠ CSS -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Knihovna XLSX -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>

  <div class="container my-5">
    <header class="text-center mb-4">
      <h1 class="fw-bold">
        <i class="bi bi-camera-fill"></i> P≈ôidat produkt
      </h1>
      <div
        id="status"
        class="status alert alert-primary mt-3 fw-bold text-uppercase"
        role="alert"
      >
        üëâ Zaƒçni v√Ωbƒõrem obchodu
        <span id="daily-count" class="d-block fw-normal mt-2">
          (Dnes p≈ôid√°no: 0 produkt≈Ø)
        </span>
      </div>
    </header>

    <!-- Krok 0: V√Ωbƒõr obchodu -->
    <section id="shop-selection" class="step card mb-3">
      <div class="card-body">
        <h2 class="card-title fs-5 fw-semibold">
          0Ô∏è‚É£ Vyber obchod
        </h2>
        <button
          id="shop-zvole"
          class="btn btn-primary w-100 mb-2 text-start"
        >
          Antik Zvole [Z]
        </button>
        <button
          id="shop-mora"
          class="btn btn-primary w-100 text-start"
        >
          Antik Mora [M]
        </button>
        <div class="text-end mt-3">
          <button
            class="nav-btn next-btn btn btn-link px-2"
            data-step="0"
          >
            ‚û°Ô∏è D√°l
          </button>
        </div>
      </div>
    </section>

    <!-- Krok 1: Focen√≠ -->
    <section id="photo-section" class="step card mb-3 d-none">
      <div class="card-body">
        <h2 class="card-title fs-5 fw-semibold">
          1Ô∏è‚É£ Nafo≈• fotky
        </h2>
        <button
          id="take-photo-btn"
          class="btn btn-success w-100 text-start"
        >
          <i class="bi bi-camera"></i> Nafo≈• fotku
        </button>
        <p class="mt-3 mb-0 text-center text-muted small">
          Nafoceno: <span id="photo-count">0/3</span> (celkem 3 fotky)
        </p>
        <input
          type="file"
          id="photo-input"
          accept="image/*"
          capture="camera"
          class="d-none"
        />
        <div class="text-end mt-3">
          <button
            class="nav-btn prev-btn btn btn-link px-2"
            data-step="1"
          >
            ‚¨ÖÔ∏è Zpƒõt
          </button>
          <button
            class="nav-btn next-btn btn btn-link px-2"
            data-step="1"
          >
            ‚û°Ô∏è D√°l
          </button>
        </div>
      </div>
    </section>

    <!-- Krok 2: Detaily produktu -->
    <section id="product-details" class="step card mb-3 d-none">
      <div class="card-body">
        <h2 class="card-title fs-5 fw-semibold">
          2Ô∏è‚É£ Vypl≈à detaily
        </h2>
        <div class="mb-3">
          <label for="product-name" class="form-label">
            N√°zev produktu
          </label>
          <input
            type="text"
            id="product-name"
            class="form-control"
            placeholder="N√°zev produktu"
          />
        </div>
        <div class="mb-3">
          <label for="product-price" class="form-label">
            Cena (Kƒç)
          </label>
          <input
            type="number"
            id="product-price"
            class="form-control"
            placeholder="Cena v Kƒç"
          />
        </div>
        <div class="mb-3">
          <label for="product-location" class="form-label">
            Um√≠stƒõn√≠ (nepovinn√©)
          </label>
          <input
            type="text"
            id="product-location"
            class="form-control"
            placeholder="Zadej um√≠stƒõn√≠"
          />
          <div
            id="location-history"
            class="form-text mt-1"
          >
            (Historie se zobraz√≠ po naƒçten√≠)
          </div>
        </div>
        <div class="mb-3">
          <button
            id="category-btn"
            class="btn btn-outline-secondary w-100"
          >
            <i class="bi bi-search"></i> Vybrat kategorii
          </button>
          <input type="hidden" id="category-id" />
        </div>

        <!-- P≈ôidan√Ω v√Ωbƒõr dopravy -->
        <div class="mb-3">
          <label for="shippingMethod" class="form-label">
            Vyber dopravu (Shipping Template ID)
          </label>
          <select id="shippingMethod" class="form-select">
            <!-- Hodnoty ID jen uk√°zkov√©; upravte dle skuteƒçn√Ωch ID z obr√°zku -->
            <option value="" disabled selected hidden>
              -- Zvolte dopravu --
            </option>
            <option value="2424163">DPD (ID 2424163)</option>
            <option value="2424164">Z√°silkovna (ID 2424164)</option>
            <option value="2424165">Bal√≠k do ruky (ID 2424165)</option>
            <option value="2424166">Osobn√≠ p≈ôevzet√≠ (ID 2424166)</option>
          </select>
        </div>

        <div
          id="progress-bar"
          class="progress mb-3 d-none"
          style="height: 10px;"
        >
          <div
            id="progress"
            class="progress-bar progress-bar-striped progress-bar-animated"
            role="progressbar"
            style="width: 0%"
          >
          </div>
        </div>
        <button
          onclick="addProduct()"
          class="btn btn-success w-100 mb-3"
        >
          <i class="bi bi-check-lg"></i> P≈ôidat produkt
        </button>
        <div class="text-end">
          <button
            class="nav-btn prev-btn btn btn-link px-2"
            data-step="2"
          >
            ‚¨ÖÔ∏è Zpƒõt
          </button>
          <button
            class="nav-btn next-btn btn btn-link px-2"
            data-step="2"
          >
            ‚û°Ô∏è D√°l
          </button>
        </div>
      </div>
    </section>

    <!-- Krok 3: Dokonƒçen√≠ -->
    <section id="finish-section" class="step card d-none">
      <div class="card-body">
        <h2 class="card-title fs-5 fw-semibold">
          3Ô∏è‚É£ Dokonƒçi
        </h2>
        <button
          id="add-another-btn"
          onclick="addAnotherProduct()"
          class="btn btn-primary w-100 mb-2 text-start"
        >
          <i class="bi bi-plus-circle"></i> P≈ôidat dal≈°√≠ produkt
        </button>
        <button
          id="finish-btn"
          onclick="finish()"
          class="btn btn-danger w-100 mb-2 text-start"
        >
          <i class="bi bi-send-fill"></i> Odeslat p≈ôes WhatsApp
        </button>
        <button
          id="reset-btn"
          onclick="resetStorage()"
          class="btn btn-secondary w-100 text-start"
        >
          <i class="bi bi-trash-fill"></i> Obnovit data
        </button>
        <div id="saved-products" class="mt-3 text-muted small"></div>
        <div class="text-end mt-3">
          <button
            class="nav-btn prev-btn btn btn-link px-2"
            data-step="3"
          >
            ‚¨ÖÔ∏è Zpƒõt
          </button>
        </div>
      </div>
    </section>
  </div>

  <!-- Mod√°ln√≠ okno pro potvrzen√≠ (ANO/NE) -->
  <div
    id="confirm-modal"
    class="modal"
    tabindex="-1"
    aria-labelledby="confirmModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-body">
          <p class="fs-5 text-center mb-4">Opravdu?</p>
          <div class="d-flex justify-content-center gap-3">
            <button
              id="confirm-yes"
              class="btn btn-success"
            >
              ANO
            </button>
            <button
              id="confirm-no"
              class="btn btn-danger"
            >
              NE
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Mod√°ln√≠ okno pro opu≈°tƒõn√≠ str√°nky -->
  <div
    id="exit-modal"
    class="modal"
    tabindex="-1"
    aria-labelledby="exitModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-3">
        <div class="modal-body text-center">
          <h2 class="fs-5 mb-3">
            Vymazal jsi data, kdy≈æ jsi skonƒçil?
          </h2>
          <p class="mb-4 text-muted">
            Pokud ne, m≈Ø≈æe≈° to udƒõlat teƒè.
          </p>
          <button
            id="delete-data-btn"
            class="btn btn-danger w-100 mb-2"
          >
            <i class="bi bi-trash3-fill"></i> Vymazat data
          </button>
          <button
            id="close-modal-btn"
            class="btn btn-secondary w-100"
          >
            Pokraƒçovat bez maz√°n√≠
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Mod√°ln√≠ okno pro v√Ωbƒõr kategorie -->
  <div
    id="category-modal"
    class="modal"
    tabindex="-1"
    aria-labelledby="categoryModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content p-3">
        <div class="modal-body">
          <h2 class="fs-5 fw-semibold mb-3">
            Vyber kategorii
          </h2>
          <input
            type="text"
            id="category-search"
            class="form-control mb-3"
            placeholder="üîç Hledej kategorii"
          />
          <div
            id="category-list"
            class="list-group mb-3"
            style="max-height: 300px; overflow-y: auto;"
          ></div>
          <button
            id="category-close-btn"
            class="btn btn-secondary w-100"
          >
            Zav≈ô√≠t
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap 5 JavaScript (pot≈ôebn√© pro mod√°ly) -->
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  ></script>
  <!-- Vlastn√≠ JS -->
  <script src="script.js"></script>
</body>
</html>
