<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>P≈ôidat produkt (Bulma verze)</title>
  
  <!-- Bulma CSS -->
  <link
    rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
  />

  <!-- Font Awesome pro ikony -->
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
  />

  <!-- Vlastn√≠ CSS -->
  <link rel="stylesheet" href="styles.css" />

  <!-- Knihovna XLSX -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
  
  <!-- Kontejner -->
  <section class="section">
    <div class="container">

      <!-- Hlaviƒçka -->
      <header class="has-text-centered mb-5">
        <h1 class="title is-3 is-spaced">
          <i class="fa-solid fa-camera-retro"></i> P≈ôidat produkt
        </h1>
        <!-- Status (hlavn√≠ pruh) -->
        <div
          id="status"
          class="notification is-primary is-light is-rounded py-4"
          style="font-weight: 700; text-transform: uppercase;"
        >
          üëâ Zaƒçni v√Ωbƒõrem obchodu
        </div>
        <!-- Li≈°ta pro evidenci denn√≠ho poƒçtu -->
        <div
          class="notification is-info is-light is-rounded py-3 daily-count-bar"
          style="margin-top: -1rem;"
        >
          <p
            id="daily-count"
            class="has-text-weight-bold"
            style="margin: 0;"
          >
            (Dnes p≈ôid√°no: 0 produkt≈Ø)
          </p>
        </div>
      </header>

      <!-- Krok 0: V√Ωbƒõr obchodu -->
      <div id="shop-selection" class="box is-rounded step mb-5">
        <p class="title is-5 mb-3">
          0Ô∏è‚É£ Vyber obchod
        </p>
        <button
          id="shop-zvole"
          class="button is-primary is-fullwidth is-rounded mb-3"
        >
          <i class="fa-solid fa-store"></i>
          <span>Antik Zvole [Z]</span>
        </button>
        <button
          id="shop-mora"
          class="button is-primary is-fullwidth is-rounded"
        >
          <i class="fa-solid fa-store"></i>
          <span>Antik Mora [M]</span>
        </button>
        <div class="has-text-right mt-3">
          <button
            class="nav-btn next-btn button is-text px-2"
            data-step="0"
          >
            ‚û°Ô∏è D√°l
          </button>
        </div>
      </div>

      <!-- Krok 1: Focen√≠ -->
      <div id="photo-section" class="box is-rounded step mb-5 is-hidden">
        <p class="title is-5 mb-4">
          1Ô∏è‚É£ Nafo≈• fotky
        </p>
        <button
          id="take-photo-btn"
          class="button is-success is-fullwidth is-rounded"
        >
          <span class="icon">
            <i class="fa-solid fa-camera"></i>
          </span>
          <span>Nafo≈• fotku</span>
        </button>
        <p class="has-text-centered mt-3 mb-0">
          <small>
            Nafoceno: 
            <span id="photo-count">0/3</span> (celkem 3 fotky)
            <i class="fa-solid fa-images"></i>
          </small>
        </p>
        <input
          type="file"
          id="photo-input"
          accept="image/*"
          capture="camera"
          class="is-hidden"
        />
        <div class="has-text-right mt-4">
          <button
            class="nav-btn prev-btn button is-text px-2"
            data-step="1"
          >
            ‚¨ÖÔ∏è Zpƒõt
          </button>
          <button
            class="nav-btn next-btn button is-text px-2"
            data-step="1"
          >
            ‚û°Ô∏è D√°l
          </button>
        </div>
      </div>

      <!-- Krok 2: Detaily produktu -->
      <div id="product-details" class="box is-rounded step mb-5 is-hidden">
        <p class="title is-5 mb-4">
          2Ô∏è‚É£ Vypl≈à detaily
        </p>
        
        <!-- N√°zev -->
        <div class="field mb-4">
          <label for="product-name" class="label">
            N√°zev produktu
          </label>
          <div class="control">
            <input
              id="product-name"
              type="text"
              class="input is-rounded"
              placeholder="N√°zev produktu"
            />
          </div>
        </div>

        <!-- Cena -->
        <div class="field mb-4">
          <label for="product-price" class="label">
            Cena (Kƒç)
          </label>
          <div class="control">
            <input
              id="product-price"
              type="number"
              class="input is-rounded"
              placeholder="Cena v Kƒç"
            />
          </div>
        </div>

        <!-- Um√≠stƒõn√≠ -->
        <div class="field mb-4">
          <label for="product-location" class="label">
            Um√≠stƒõn√≠ (nepovinn√©)
          </label>
          <div class="control">
            <input
              id="product-location"
              type="text"
              class="input is-rounded"
              placeholder="Zadej um√≠stƒõn√≠"
            />
          </div>
          <p id="location-history" class="help mt-1">
            (Historie um√≠stƒõn√≠ se objev√≠ zde)
          </p>
        </div>

        <!-- V√Ωbƒõr kategorie -->
        <div class="field mb-4">
          <button
            id="category-btn"
            class="button is-link is-light is-rounded is-fullwidth"
          >
            <span class="icon">
              <i class="fa-solid fa-search"></i>
            </span>
            <span>Vybrat kategorii</span>
          </button>
          <input type="hidden" id="category-id" />
        </div>

        <!-- V√Ωbƒõr dopravy -->
        <div class="field mb-4">
          <label class="label" for="shippingMethod">
            Vyber dopravu (Shipping Template ID)
          </label>
          <div class="control">
            <div class="select is-rounded is-fullwidth">
              <select id="shippingMethod">
                <option value="" disabled selected hidden>
                  -- Zvolte dopravu --
                </option>
                <!-- Uk√°zkov√© ID -->
                <option value="2424163">DPD (ID 2424163)</option>
                <option value="2424164">Z√°silkovna (ID 2424164)</option>
                <option value="2424165">Bal√≠k do ruky (ID 2424165)</option>
                <option value="2424166">Osobn√≠ p≈ôevzet√≠ (ID 2424166)</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Progress bar -->
        <progress
          id="progress-bar"
          class="progress is-primary is-rounded mb-4 is-hidden"
          value="0"
          max="100"
        >
          0%
        </progress>

        <!-- Tlaƒç√≠tko pro p≈ôid√°n√≠ produktu -->
        <button
          class="button is-success is-fullwidth is-rounded mb-3"
          onclick="addProduct()"
        >
          <span class="icon">
            <i class="fa-solid fa-check"></i>
          </span>
          <span>P≈ôidat produkt</span>
        </button>

        <!-- Navigace krok≈Ø -->
        <div class="has-text-right">
          <button
            class="nav-btn prev-btn button is-text px-2"
            data-step="2"
          >
            ‚¨ÖÔ∏è Zpƒõt
          </button>
          <button
            class="nav-btn next-btn button is-text px-2"
            data-step="2"
          >
            ‚û°Ô∏è D√°l
          </button>
        </div>
      </div>

      <!-- Krok 3: Dokonƒçen√≠ -->
      <div id="finish-section" class="box is-rounded step is-hidden">
        <p class="title is-5 mb-4">
          3Ô∏è‚É£ Dokonƒçi
        </p>
        <button
          id="add-another-btn"
          class="button is-info is-fullwidth is-rounded mb-2"
          onclick="addAnotherProduct()"
        >
          <span class="icon">
            <i class="fa-solid fa-plus-circle"></i>
          </span>
          <span>P≈ôidat dal≈°√≠ produkt</span>
        </button>
        <button
          id="finish-btn"
          class="button is-danger is-fullwidth is-rounded mb-2"
          onclick="finish()"
        >
          <span class="icon">
            <i class="fa-solid fa-paper-plane"></i>
          </span>
          <span>Odeslat p≈ôes WhatsApp</span>
        </button>
        <button
          id="reset-btn"
          class="button is-rounded is-fullwidth"
          style="background: #777; color: #fff;"
          onclick="resetStorage()"
        >
          <span class="icon">
            <i class="fa-solid fa-trash"></i>
          </span>
          <span>Obnovit data</span>
        </button>
        <div
          id="saved-products"
          class="content mt-3 has-text-grey has-text-left is-size-7"
        >
          <!-- Zde se zobraz√≠ info o exportu -->
        </div>
        <div class="has-text-right mt-3">
          <button
            class="nav-btn prev-btn button is-text px-2"
            data-step="3"
          >
            ‚¨ÖÔ∏è Zpƒõt
          </button>
        </div>
      </div>

    </div>
  </section>

  <!-- Mod√°l pro potvrzen√≠ ANO/NE -->
  <div id="confirm-modal" class="modal">
    <div class="modal-background"></div>
    <div class="modal-content">
      <div class="box is-rounded has-text-centered">
        <p class="is-size-5 mb-4">Opravdu?</p>
        <div class="buttons is-justify-content-center">
          <button id="confirm-yes" class="button is-success is-rounded">
            ANO
          </button>
          <button id="confirm-no" class="button is-danger is-rounded">
            NE
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Mod√°l pro opu≈°tƒõn√≠ str√°nky -->
  <div id="exit-modal" class="modal">
    <div class="modal-background"></div>
    <div class="modal-content">
      <div class="box is-rounded has-text-centered">
        <p class="is-size-5 mb-3">
          Vymazal jsi data, kdy≈æ jsi skonƒçil?
        </p>
        <p class="mb-4 has-text-grey">
          Pokud ne, m≈Ø≈æe≈° to udƒõlat teƒè.
        </p>
        <button
          id="delete-data-btn"
          class="button is-danger is-fullwidth is-rounded mb-3"
        >
          <span class="icon">
            <i class="fa-solid fa-trash-can"></i>
          </span>
          <span>Vymazat data</span>
        </button>
        <button
          id="close-modal-btn"
          class="button is-fullwidth is-rounded"
        >
          <span class="icon">
            <i class="fa-solid fa-arrow-right"></i>
          </span>
          <span>Pokraƒçovat bez maz√°n√≠</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Mod√°l pro v√Ωbƒõr kategorie -->
  <div id="category-modal" class="modal">
    <div class="modal-background"></div>
    <div class="modal-content">
      <div class="box is-rounded">
        <p class="is-size-5 has-text-weight-semibold mb-4">
          Vyber kategorii
        </p>
        <div class="field mb-3">
          <div class="control">
            <input
              id="category-search"
              type="text"
              class="input is-rounded"
              placeholder="üîç Hledej kategorii"
            />
          </div>
        </div>
        <div
          id="category-list"
          class="list"
          style="max-height: 250px; overflow-y: auto;"
        >
          <!-- Dynamick√Ω seznam kategori√≠ -->
        </div>
        <button
          id="category-close-btn"
          class="button is-fullwidth is-rounded mt-4"
        >
          Zav≈ô√≠t
        </button>
      </div>
    </div>
  </div>

  <!-- Vlastn√≠ JS -->
  <script src="script.js"></script>
</body>
</html>
